Цель работы: изучение способов представления изображений, ознакомление со структурой формата анализ статистических свойств изображений, а также получение практических навыков обработки изображений. Описание структуры формата Структура Заголовок. Данные по пикселям: Заголовок имеет следующую структуру: описывает тип файла размер файла в байтах зарезервировано, должно быть зарезервировано, должно быть смещение в байтах от начала заголовка до массива пикселей. Заголовок имеет следующий вид: размер структуры в байтах ширина изображения в пикселях высота изображения в пикселях количество плоскостей изображения количество бит на один пиксель тип сжатия размер изображения в байтах горизонтальное разрешение в пикселях на метр вертикальное разрешение в пикселях на метр размер палитры число значимых элементов палитры. После заголовка следует информация о пикселях. Данная информация представлена в виде одномерного массива, в котором значения, относящиеся к отдельным пикселям, записаны строка за строкой. Строки могут идти как снизу-вверх, так и сверху-вниз. Ширина строки в байтах должна быть выравнена по границе двойного слова бита), т.е. должна быть кратна числу При необходимости для выполнения этого условия в конце каждой строки добавляются дополнительные байты от до х), значения которых несущественны. Каждый пиксель в формате представляется тремя байтами. Первый содержит значение компоненты второй третий Структура имеет название При исследовании использовались поля: для определения количества пикселей в картинке и последующей их Исходное изображение в формате Для выполнения работы было выбрано следующее изображение: Рисунок Исходное изображение Загрузка в память файла Для загрузки в память исходного изображения были программно были реализованы структуры и структура для хранения одного пикселя. В результате чтения, информация о файле была записана в две структуры, описывающих заголовок, и массив пикселей Выделение содержимого и Чтобы получить каждую компоненту необходимо сформировать три изображения по следующему правилу: все байты, не относящиеся к данной компоненте обнулены. Таким образом были получены файлы: Рисунок Компонента Рисунок Компонента Рисунок Компонента Анализ корреляционных свойств компонент Анализ будет выполняться с использованием формулы оценки коэффициента корреляции: где А и компоненты изображения, математическое ожидание в соответствии с формулой: оценки среднеквадратичного отклонения компонент А и В, вычисляемые по формуле: Коэффициент корреляции указывает на наличие связи и принимает значения от до Оценка коэффициентов корреляции между парой компонент изображения Полученные коэффициенты корреляции: Рисунок Коэффициент корреляции Как видно по полученным данным, компоненты и более зависимы друг с другом, чем другие пары компонент. Построение сечения трехмерного графика оценки нормированной автокорреляционной функции В результате были получены графики: Рисунок Сечение графика автокорреляционной функции компоненты Рисунок Сечение графика автокорреляционной функции компоненты Рисунок Сечение графика автокорреляционной функции компоненты При и значения автокорреляционной функции равно для всех компонент, так как исходная картинка не сдвигается. Также, при изменении на одинаковые значения в отрицательную и положительную сторону, максимальное значение корреляции будет меньше и одинакова для положительного и отрицательного так как картинка смещается на одно и то же количество пикселей. Преобразование данных из формата в формат Преобразование данных из в производится по формуле: Значения коэффициента корреляции между компонентами Рисунок Коэффициент корреляции Выделение содержимого компонент В результате были получены изображения: Рисунок Компонента Рисунок Компонента Рисунок Компонента Обратное преобразование из в Обратное преобразование выполнятся по формулам: В результате обратного преобразования были получены следующие изображения: Рисунок Исходное изображение Рисунок Восстановленное изображение Стоит отметить, что все преобразование выполняются с помощью округления, поэтому преобразование форматов в общем случае является необратимым. Из-за этого в результате обратного преобразования возможен выход восстановленных значений за границы исходного диапазона. В этом случае необходимо выполнить операцию клиппирования: Значение отношения Сигнал/Шум вычисляется по формуле: Полученные значения Рисунок Значения Можно сделать вывод, что чем ниже тем хуже восстановились компоненты. И хотя визуальных изменений не видно, однако по значениям можно сделать вывод о том, что лучше всех восстановилась компонента а хуже Стоит отметить, что изображение визуально не имеет искажений при значение которого больше или равно Децимация компонент и Децимация производится только на отдельно записанных компонентах и так как в изображениях формата они не несут основную информационную нагрузку за это отвечает в основном яркостная компонента можно в несколько раз уменьшить информацию, передаваемую данными компонентами без серьёзных потерь в качестве изображения. Для этого существует понятие децимация". В работе тестируется децимация двух видов: а) Исключение строк и столбцов с нечётными номерами. Среднее арифметическое смежных элементов соседи по диагонали не рассматриваются, только верхние, нижние, левые и правые). Децимация в раза по ширине и высоте В результате выполнения децимации в раза по ширине и высоте по правилу восстановления исходного размера путем копирования недостающих компонент и выполнения обратного преобразования из в были получены следующие значения Рисунок Децимация в раза по ширине и высоте правилу Можно сделать вывод о том, что значения каждой из компонент уменьшились. Визуально изменения не видны, т.к. значение все еще остается высоким. В результате выполнения децимации в раза по ширине и высоте по правилу восстановления исходного размера путем копирования недостающих компонент и выполнения обратного преобразования из в были получены следующие значения Рисунок Децимация в раза по ширине и высоте правилу Можно сделать вывод о том, что значения каждой из компонент относительно исходного уменьшились. Стоит обратить внимание и на то, что полученные значения выше предыдущих. Это объясняется тем, что при исключении удаляемые значения учитывались. Децимация в раза по ширине и высоте Аналогичные шаги были проделаны для децимации в раза по ширине и высоте. В итоге получены значения Рисунок Децимация в раза по ширине и высоте правилу Видно, что значения сильно относительно исходных уменьшились и достигли тех значений, когда искажения будут видны на изображении: Рисунок Часть исходного изображения Рисунок Часть восстановленного изображения В результате выполнения децимации в раза по ширине и высоте по правилу восстановления исходного размера путем копирования недостающих компонент и выполнения обратного преобразования из в были получены следующие значения Рисунок Децимация в раза по ширине и высоте правилу Опять же значения сильно уменьшились и достигли тех значений, когда искажения можно визуально оценить: Рисунок Часть исходного изображения Рисунок Часть восстановленного изображения Однако стоит отметить, что по значениям больше всего искажений было после децимации в раза по правилу Гистограммы частот Рисунок Рисунок Рисунок Рисунок Рисунок Рисунок Можно сделать вывод, что компоненты распределены почти по всей области значений, а и определены в одной области, что говорит нам, что эти компоненты будут сжиматься намного лучше. Энтропия Энтропия для каждой компоненты вычисляется по формуле: Рисунок Значения энтропии Энтропия позволяется определить эффективность сжатия для компонент. Как видно, эффективность сжатия выше у компонент и Количественный анализ эффективности разностного кодирования Требуется сформировать массивы где указывает компоненту исходного изображения, для которого вычисляется разность, а номер правила вычисления разности. Значение на позиции следует вычислять по следующей формуле: где значение пикселя в компоненте на позиции а правило с номером Используются следующие правила: сосед слева сосед сверху сосед сверху слева среднее арифметическое трех соседей Пиксели в первой строке и столбце исключаются из рассмотрения, т.к. не имею некоторых соседей. Массив построенный по правилу левого соседа Энтропии для каждой из компонент имеют следующие значения: Рисунок Значения энтропии Массив построенный по правилу верхнего соседа Энтропии для каждой из компонент имеют следующие значения: Рисунок Значения энтропии Массив построенный по правилу верхнего левого соседа Энтропии для каждой из компонент имеют следующие значения: Рисунок Значения энтропии Массив построенный по правилу среднего арифметического трех соседей: сверху, слева, сверху слева Энтропии для каждой из компонент имеют следующие значения: Рисунок Значения энтропии По полученным результатам видно, что алгоритм эффективнее работает для компонент так как значения энтропии снизились. Дополнительное задание Разложение изображения на подкадры Рисунок Рисунок Рисунок Рисунок Изображения одинаковые, а значит, можно сделать вывод, что на тех позициях, которые остаются и исключаются находятся схожие значения компонент. Гистограммы подкадров Рисунок Рисунок Рисунок Рисунок Гистограммы одинаковые, а значит, можно опять же сделать вывод, что на тех позициях, которые остаются и исключаются находятся схожие значения компонент. Энтропия Были получены значения энтропии: Рисунок Значения энтропии Энтропия так же доказывает справедливость вывода, сделанного ранее. Выводы: Была изучена структура изображения формата были изучены заголовки, что помогло в дальнейшем извлечь такую важную информацию, как ширина и высота изображения. Были исследованы корреляционные свойства компонент выявлено, что зависимость между ними достаточно высокая, особенно между компонентами и Для того, чтобы избежать высокой корреляции используется формат так как в данном формате меньшая корреляционная связь между компонентами, что так же позволяет обеспечить лучшее сжатие. Но формат обладает и минусами: при восстановлении исходного изображения теряется часть информации. Для оценки потери информации и качества восстановления используется пиковое отношение сигнала к шуму), так значения возрастают при восстановлении исходного изображения из формата Децимация частичное исключение информации) позволяет увеличить степень сжатия для оценки используется оценка энтропии), но теряется качество изображения. Так, в данной программной реализации наилучшим вариантом децимации оказалась децимация в раза путем использования среднего арифметического, а наихудшим вариантом децимация в раза путем исключения строк и столбцов. Анализ эффективности разностного кодирования показал, что он улучшает показатели кодирования и сжатия. Листинг: 