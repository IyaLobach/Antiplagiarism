Цель работы: изучение алгоритмов, используемых в базовом режиме стандарта анализ статистических свойств, используемых при сжатии коэффициентов дискретного косинусного преобразования ДКП), а также получение практических навыков разработки методов блоковой обработки при сжатии изображений с потерями. Дискретное косинусное преобразование ДКП) Реализовать процедуру прямого и обратного ДКП для блоков Выход обоих преобразований сделать целочисленным с помощью операции округления. Прямую и обратную процедуру выполнения ДКП нагляднее описывать в форме матричного умножения: где матрица преобразования размерности Строки матрицы состоят из векторов, образованных значениями косинусов: где соответствует номеру строки, нормирующий коэффициент, а положение в пространстве отсчета, вычисляемое по формуле: Нормирующий коэффициент вычисляется: если иначе Окончательные формулы прямого и обратного преобразований, используемых в стандарте выглядят следующим образом: В стандарте размерность двумерного преобразования равна Результатом ДКП является матрица размером Ее элементы принято называть спектральными коэффициентами. Коэффициент на позиции принято называть коэффициентом постоянного тока. Его обозначают от английского поскольку его значение получено в результате использования двух функций косинусов нулевой частоты: по горизонтали и по вертикали. Остальные спектральные коэффициенты называют коэффициентами переменного тока и обозначают от английского Оценить искажения, вносимые ДКП В результате применения процедуры прямого и обратного ДКП, были получены изображения и значения Рисунок Исходное изображение Рисунок Изображения после ДКП Рисунок Значения для Рисунок Исходное изображение Рисунок Изображение после ДКП Рисунок Значения для Рисунок Исходное изображение Рисунок Изображение после ДКП Рисунок Значение для По полученным изображениям и высоким значениям можно сказать о том, что процедура прямого и обратного ДКП почти не вносит изменений в исходное изображение. Квантование спектральных коэффициентов Реализация процедуры квантования и деквантования Формально процедуру квантования спектральных коэффициентов можно определить следующим образом: где шаг квантования является элементом соответствующей матрицы При деквантовании будет вычисляться аппроксимирующее значение каждого кванта Для упрощения процедуры построения матриц квантования приводят следующую формулу: где целочисленный параметр, управляющий качеством обработки. Оценка влияний искажений Для оценки влияния искажений необходимо последовательно выполнить процедуры ДКП, квантования, деквантования и обратного ДКП. В результате этих шагов при различных параметрах были получены изображения: Рисунок Исходное изображение Рисунок Полученное изображения для Рисунок Полученное изображение для Рисунок Полученное изображение для Даже визуально можно заметить, что с увеличением параметра качество полученного изображения уменьшается. Об этом же свидетельствует и графики зависимости Рисунок для изображения Аналогично и для других изображений: Рисунок Исходное изображение Рисунок Полученное изображение для Рисунок Полученное изображение для Рисунок Полученное изображение для Значения для изображения Рисунок для Рисунок Исходное изображение Рисунок Полученное изображения для Рисунок Полученное изображение для Рисунок Полученное изображение для График для изображения Рисунок для Таким образом, по всем трем изображениям и графикам можно сделать вывод, что при квантовании и деквантовании с увеличением качество изображения ухудшается, как и значение Также стоит отметить, что для яркостной компоненты уменьшается быстрее. Это объясняется тем, что в данной компоненте содержится больше информации. Сжатие без потерь Кодирование каждой компоненты осуществляется независимо. Обход блоков каждой компоненты изображения осуществляется в сканирующем порядке. Для каждого блока выполняются следующие действия: Кодирование коэффициента постоянного тока Перегруппировка коэффициентов переменного тока и формирование одномерного массива в соответствии с зигзагообразной последовательностью. Применение кодирования длин серий для последовательности из коэффициентов. Кодирование пар Процедура кодирования квантованных коэффициентов постоянного тока Для кодирования используется разностный метод. Дальнейшей обработке подвергается разность коэффициента, текущего и предыдущего обрабатываемого блоков: где номер текущего обрабатываемого блока. Для первого блока значение вычисляется как разность и среднего по всем значениям Значение представляется в форме битовой категории и амплитуды. Битовая категория числа вычисляется по формуле: Определение битовой категории осуществляется по формуле: где номер строки. Можно представить битовые категории в виде таблицы: Рисунок Битовые категории целых чисел Амплитудой фактически является само кодируемое число. Оценка эффективности использования разностного кодирования для коэффициентов постоянного тока Для оценки эффективности использования разностного кодирования необходимо построить гистограммы частот и и вычислить энтропии по формуле: Рисунок Гистограмма для компоненты изображения Рисунок Гистограмма для компоненты изображения Рисунок Гистограмма для компоненты изображения Значения энтропии каждой из компонент до кодирования и после: Рисунок Энтропия для изображения Как видно по гистограмме значения каждой из компонент локализуются после кодирования около а энтропия уменьшается. Это же можно увидеть и для остальных изображений. Рисунок Гистограмма для компоненты изображения Рисунок Гистограмма для компоненты изображения Рисунок Гистограмма для компоненты изображения Значения энтропии каждой из компонент до кодирования и после: Рисунок Энтропия для изображения Рисунок Гистограмма для компоненты изображения Рисунок Гистограмма для компоненты изображения Рисунок Гистограмма для компоненты изображения Значения энтропии каждой из компонент до кодирования и после: Рисунок Энтропия для изображения Таким образом, анализируя гистограммы частот и значения энтропии можно сделать вывод о том, что в результате кодирования энтропия уменьшается, а значения локализуются около Кодирование длинами серий Процедура для каждого блока из квантованных коэффициентов переменного тока включает в себя: Перегруппировку коэффициентов в соответствии с зигзагообразной последовательностью. Новая последовательность будет обладать следующим свойством значимые ненулевые) коэффициенты будут преобладать в ее начале, а ближе к концу последовательности в основном будут находиться нулевые значения. Замену сформированной последовательности на последовательность пар Формирование для каждой пары на основе значения новой пары Формирование троек Сформированная на предыдущем шаге последовательность коэффициентов кодируется длинами серий. Результатом будет являться новая последовательность, состоящая из пар Здесь определяет число нулевых коэффициентов в серии. Каждая серия завершается ненулевым значением коэффициента. Обработка завершается, когда закодирован последний ненулевой коэффициент. При этом в поток вставляется дополнительная специальная пара которая носит название Если длина серии, которая не является последней в блоке, превышает нулей, то она разбивается на несколько подсерий, каждая из которых содержит не более нулей. Подпоследовательность из шестнадцати нулей кодируется символом Такая пара носит специальное название Значение если оно не относится к паре или кодируется по битовым категориям, формируя пару В битовый поток записывается значение амплитуды состоящее из бит. Определение соотношения размеров в сжатом битовом потоке для следующих данных: В ходе выполнения были получены следующие значения: Рисунок Процент каждой составляющей для изображения Рисунок Процент каждой составляющей для изображения Рисунок Процент каждой составляющей для изображения Рисунок Процент каждой составляющей для изображения Рисунок Процент каждой составляющей для изображения Рисунок Процент каждой составляющей для изображения Для оценки размера сжатого потока для различных значений квантователя был получен график поток до сжатия поток после сжатия для каждой из компонент: Рисунок степень сжатия) для изображения Рисунок степень сжатия) для изображения Рисунок степень сжатия) для изображения Дополнительное задание. Необходимо построить на одном графике зависимости в сжатии данных для АС коэффициентов от параметра и в сжатии данных для АС коэффициентов от параметра в процентах. Исходя из полученных графиков, можно сделать вывод о том, что с увеличением значение увеличивается, а уменьшается, что говорит о том, что при увеличении число нулевых позиций увеличивается, а значение ненулевого элемента уменьшается. Выводы В ходе выполнения работы было выполнено прямое и обратное ДКП. Было выявлено, что оно никак не влияет на качество изображения, однако позволяет построить спектральные коэффициенты, по которым производится квантование. В результате квантования при увеличении значение снижается, а качество визуально ухудшается. В результате разностного кодирования значения частоты коэффициентов постоянного тока находятся около нуля, что можно видеть по гистограммам. Помимо этого, благодаря использованию разностного кодирования можно уменьшить значение энтропии. Для значений переменного тока используется кодирование длинами серий. Это возможно благодаря тому, что элементы переменного тока переупорядочиваются в зигзагообразном порядке, и основная энергия концентрируется в левом верхнем углу. Наибольший процент в сжатом битовом потоке отводится на так как этих пар больше всего. С увеличением радиуса меняется соотношение размеров в сжатом битовом потоке. При больших параметрах сжатия, то есть при больших сильно заметны границы блоков, размытие, а уменьшается. Листинг программы: Сompression.h" открытие и чтение всех файлов Прямое и обратное ДКП" квантование и деквантование с графиками Квантования и деквантование с графиком кодирование ДС Кодирование квантованных коэффициентов постоянного тока Кодирование оценка сжатого потока и степени сжатия) График степень сжатия)" проход по полосе запись битовой категории и амплитуды отнесение к одной из битовых категорий разностное кодирование для Перегруппировка коэффициентов в соответствии с зигзагообразной последовательностью формирование и 