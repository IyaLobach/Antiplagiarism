Оглавление Оглавление Цель работы: Описание структуры формата Выполнение работы: Согласование файла с преподавателем Загрузка исходного изображения в память указанного файла. Выделение компонент и Анализ корреляционных свойств компонент Преобразование данных из системы в Выделение содержимого компонент Обратное преобразование данных из формата в Децимация в раза Децимация в раза Построение гистограмм частот компонент и Оценка энтропии Количественный анализ эффективности разностного кодирования, которого используется в алгоритмах класса Оценка энтропии Индивидуальное задание. Выводы Листинг программы: Цель работы: Изучение способов представления изображений, ознакомление со структурой формата анализ статистических свойств изображений, а также получение практических навыков обработки изображений. Описание структуры формата Заголовок. Данные по пикселям: Заголовок имеет следующую структуру: описывает тип файла размер файла в байтах зарезервировано, должно быть зарезервировано, должно быть смещение в байтах от начала заголовка до массива пикселей. Заголовок имеет следующий вид: размер структуры в байтах ширина изображения в пикселях высота изображения в пикселях количество плоскостей изображения количество бит на один пиксель тип сжатия размер изображения в байтах горизонтальное разрешение в пикселях на метр вертикальное разрешение в пикселях на метр размер палитры число значимых элементов палитры. После заголовка следует информация о пикселях. Данная информация представлена в виде одномерного массива, в котором значения, относящиеся к отдельным пикселям, записаны строка за строкой. Строки могут идти как снизу-вверх, так и сверху-вниз. Ширина строки в байтах должна быть выравнена по границе двойного слова бита), т.е. должна быть кратна числу При необходимости для выполнения этого условия в конце каждой строки добавляются дополнительные байты от до х), значения которых несущественны. Каждый пиксель в формате представляется тремя байтами. Первый содержит значение компоненты второй третий Структура имеет название При исследовании использовались поля: для определения количества пикселей в картинке и последующего их использования Выполнение работы: Согласование файла с преподавателем Рис. Исходное изображение Загрузка исходного изображения в память указанного файла. Чтение файла в память выполняется с помощью функции Функция получает файл изображения, в процессе своей работы создает две структуры заголовка и массив пикселей. Выделение компонент и Создается три файла по следующему правилу: данные, не относящиеся к соответствующей компоненте, обнуляются. Таким образом, получаем файла с соответствующими цветами. Рис. Выделение компоненты Рис. Выделение компоненты Рис. Выделение компоненты Анализ корреляционных свойств компонент а) Коэффициент корреляции указывает на наличие связи и принимает значения от до Например, при анализе связи между двумя переменными получен коэффициент парной корреляции, равный Это означает, что между переменными существует точная обратная линейная зависимость, а если она близка к нулю, то они менее зависимы. Рис. полученные коэффициенты корреляции Как видно по полученным данным, компоненты и более зависимы друг с другом, чем другие пары компонент. б) Рисунок Графики автокорреляционной функции компоненты Рисунок Графики автокорреляционной функции компоненты Рисунок Графики автокорреляционной функции компоненты По этим графикам видно, что при и значения автокорреляционной функции равно для всех компонент, так как исходная картинка не сдвигается, и находится зависимость исходной картинки с ее точной копией. Также, при изменении на одинаковые значения в отрицательную и положительную сторону, максимальное значение корреляции будет меньше и одинакова для положительного и отрицательного так как картинка смещается на одно и то же количество пикселей. При удалении от значения коэффициента уменьшается, так как картинка будет сдвигаться на большее количество пикселей. Преобразование данных из системы в Преобразование данных из в производится по формуле: Формат позволяет получить меньшую зависимость компонент меньшую корреляцию). Результат вычисления программы корреляции между компонентами формата Рисунок Значения коэффициентов корреляции для Как можно видеть, зависимость между компонентами формата меньше, нежели между компонентами формата Это позволяет избежать избыточности информации при сжатии, а также снизить риск повреждения всей картинки при повреждении/изменении одной компоненты. Выделение содержимого компонент Создается три файла по следующему правилу: значение компоненты для каждого пикселя сохраняется во всех трех байтах, соответствующих позициям и этого пикселя. Рисунок Выделение компоненты Рисунок Выделение компоненты Рисунок Выделение компоненты Обратное преобразование данных из формата в Обратное преобразование выполнятся по формулам: Рисунок Исходное изображение Рисунок Восстановленное изображение Преобразование форматов является необратимым, так как выполняется с помощью округления. Из-за этого возможен выход восстановленных значений за границы исходного диапазона, поэтому необходимо выполнить операцию клиппирования, по формулам ниже: Значение сигнал/шум) вычисляется по формуле: Полученные программно значения Рисунок По этим значениям видно, что при восстановлении интенсивности компонент изменились, так как при прямом и обратном преобразовании были использованы дробные числа, которые отсекались при их восстановлении в Однако видимых различий между восстановленным и исходным изображении не обнаружено. Это связано с тем, что значение выше минимального значения, при котором изображение восстанавливается без потерь примерно равное Децимация в раза Децимация производится только на отдельно записанных компонентах и так как в изображениях формата они не несут основную информационную нагрузку за это отвечает в основном яркостная компонента можно в несколько раз уменьшить информацию, передаваемую данными компонентами без серьёзных потерь в качестве изображения. Для этого существует понятие децимация". В работе тестируется децимация двух видов: а) Исключение строк и столбцов с нечётными номерами. Значения в данном случае, при децимации в раза, следующие: Рисунок при децимации в раза, путем исключения четных строк и столбцов Глядя на данные, видно, что снизился, что свидетельствует о частичной потере данных, но не критичной. Рисунок Сравнение исходного слева) изображения и восстановленного справа) при децимации в раза путем исключения четных строк и столбцов. Как можно заметить, явных искажений не наблюдается даже при наблюдении в масштабе Среднее арифметическое смежных элементов соседи по диагонали не рассматриваются, только верхние, нижние, левые и правые). Значения в данном случае, при децимации в раза, следующие: Рисунок при децимации в раза, путем нахождения среднего арифметического смежных элементов. Значения при данном типе децимации больше, чем в пункте а), так происходит из-за того, что учитываются смежные пиксели. Рисунок Сравнение исходного слева) изображения и восстановленного справа) при децимации в раза путем нахождения среднего арифметического соседних элементов. Опять же, видимых изменений не наблюдается. Децимация в раза а) Исключение строк и столбцов с нечётными номерами. Рисунок при децимации в раза, путем исключения четных строк и столбцов По полученным показателем видно, что потери данных значительно выше, по сравнению с децимацией в раза. Рисунок Сравнение исходного слева) изображения и восстановленного справа) при децимации в раза путем исключения четных строк и столбцов. Картинка подтверждает значительную потерю данных: видно, что красная компонента сильно преобладает на восстановленной картинке, что является некорректным. Среднее арифметическое смежных элементов соседи по диагонали не рассматриваются, только верхние, нижние, левые и правые). Рисунок при децимации в раза, путем нахождения среднего арифметического смежных элементов Значения при данном типе децимации больше, чем в пункте а), но меньше, чем при децимации в раза. Рисунок Сравнение исходного слева) изображения и восстановленного справа) при децимации в раза путем нахождения среднего арифметического соседних элементов. Картинка повреждена, но красная компонента в этом случае не столь ярко выражена, как в пункте а) Построение гистограмм частот компонент и Рисунок Гистограмма компоненты Рисунок Гистограмма компоненты Рисунок Гистограмма компоненты Рисунок Гистограмма компоненты Рисунок Гистограмма компоненты Рисунок Гистограмма компоненты По данным гистограмм видно, что компоненты распределены более равномерно по области значений, что свидетельствует о том, что эти компоненты будут сжиматься хуже, нежели компоненты и которые более сосредоточены в одной области. Оценка энтропии Энтропия для каждой компоненты вычисляется по следующей формуле: Рассчитанные программно значения: Рисунок Оценка энтропии при поэлементном независимом сжатии компонент и Энтропия меньше всего у компонент и как и было видно по гистограммам. Количественный анализ эффективности разностного кодирования, которого используется в алгоритмах класса Массивы формируются по следующему правилу: где значение пикселя в компоненте на позиции а правило с номером по которому вычисляется предсказание пикселя на позиции В исследовании используются следующие правила предсказания: сосед слева на позиции сосед сверху на позиции сосед сверху слева на позиции среднее арифметическое трех соседей сверху, слева и сверху слева. Массив построенный по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Массив построенный по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Массив построенный по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Массив построенный по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу Рисунок Гистограмма компоненты по правилу По результатам гистограмм видно, что все компоненты стремятся локализоваться в одной области, тем не менее, компоненты и опять же более сосредоточены в одной области, по сравнению с остальными компонентами. Оценка энтропии Рисунок Оценка энтропии компонент, по правилу Рисунок Оценка энтропии компонент, по правилу Рисунок Оценка энтропии компонент, по правилу Рисунок Оценка энтропии компонент, по правилу Как видно по результатам работы программы, энтропия значительно снизилась. Лучших результатов энтропии удалось добиться при работе алгоритма по первому и четвертому правилу. Индивидуальное задание. Изменение местоположения пикселей исходного файла для получения следующих результатов: результирующий файл должен содержать исходное изображение, отраженное относительно горизонтали эффект отражения в воде) Чтобы отразить файл по горизонтали, необходимо отзеркалить порядок строк, то есть поменять первую с последней и так далее. Рисунок Отраженное по горизонтали изображение Выводы Была изучена структура изображения формата были изучены заголовки, что помогло в дальнейшем извлечь такую важную информацию, как ширина и высота изображения. Были исследованы корреляционные свойства компонент выявлено, что зависимость между ними достаточно высокая, особенно между компонентами и Для того, чтобы избежать высокой корреляции используется формат так как в данном формате меньшая корреляционная связь между компонентами, что так же позволяет обеспечить лучшее сжатие. Но формат обладает и минусами: при восстановлении исходного изображения теряется часть информации. Для оценки потери информации и качества восстановления используется пиковое отношение сигнала к шуму), так значения возрастают при восстановлении исходного изображения из формата Децимация частичное исключение информации) позволяет увеличить степень сжатия для оценки используется оценка энтропии), но теряется качество изображения. Так, в данной программной реализации самым лучшим вариантом децимации оказалась децимация в раза путем использования среднего арифметического, а самым худшим вариантом децимация в раза путем исключения строк и столбцов. Анализ эффективности разностного кодирования показал, что он улучшает показатели кодирования и сжатия, в данной программной реализации лучшей эффективности удалось достичь при использовании первого и четвертого правила. Листинг программы: читаем файловый заголовок в структуру Читаем заголовок изображения в структуру а) б) красный зеленый голубой б) б) сосед слева сосед сверху сосед сверху-слева среднее арифметическое трех соседей 